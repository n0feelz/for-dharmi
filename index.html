<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Our Sweet Journey</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #ff758c, #ff7eb3);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      overflow: hidden;
    }

    .card {
      background: rgba(255, 255, 255, 0.96);
      width: 92%;
      max-width: 520px;
      border-radius: 24px;
      padding: 24px 20px 30px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.25);
      text-align: center;
      position: relative;
      z-index: 2;
    }

    h1 {
      margin: 5px 0 10px;
      font-size: 24px;
      color: #ff3d6e;
    }

    p {
      font-size: 16px;
      line-height: 1.6;
      color: #333;
      min-height: 120px;
      margin: 10px 0;
    }

    button {
      margin-top: 14px;
      padding: 12px 22px;
      font-size: 15px;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      background: #ff3d6e;
      color: white;
      transition: all 0.25s ease;
    }

    button:active {
      transform: scale(0.96);
    }

    .music-btn {
      background: #ff9aa2;
      margin-top: 8px;
    }

    .hearts {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 1;
    }

    .heart {
      position: absolute;
      color: #ff4d88;
      font-size: 18px;
      animation: float 5s linear infinite;
      opacity: 0.8;
    }

    @keyframes float {
      0% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translateY(-100vh) scale(1.6);
        opacity: 0;
      }
    }

    @media (max-width: 380px) {
      h1 { font-size: 20px; }
      p { font-size: 14px; }
      button { font-size: 14px; }
    }
  </style>
</head>
<body>

  <div class="card">
    <h1>For You ‚ù§Ô∏è</h1>
    <p id="storyText"></p>
    <button id="nextBtn">Next</button><br>
    <button id="musicBtn" class="music-btn">Play Music üéµ</button>
  </div>

  <div class="hearts" id="hearts"></div>

  <!-- Background Music (royalty‚Äëfree sample, replace with your own MP3 if desired) -->
  <audio id="bgMusic" loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_c8c8a73467.mp3?filename=romantic-background-112191.mp3" type="audio/mpeg">
  </audio>

  <script>
    const story = [
      "Dharmi, from the first day we met, I know I wasn‚Äôt perfect. I acted like an idiot sometimes, your favorite word, ‚Äòasshole‚Äô, but you still stayed and became my closest person.",
      "And that‚Äôs why I admire you. You say you don‚Äôt deserve all this, but you deserve more kindness and love than you think. You make every space warmer just by being in it.",
      "You changed me, Dharmi. Talking to you makes me want to be better, calmer, and stronger. Not because I have to, but because you inspire me to grow.",
      "When I picture my future, I see Smit and Dharmi laughing over small things, supporting each other, and building a life full of peace and trust.",
      "I see a cozy home, happy kids learning your kindness and your beautiful heart, and us smiling at how far we‚Äôve come together.",
      "I promise to respect you, listen to you, and never take you for granted. You are rare, Dharmi, and I want to protect that smile of yours.",
      "So today I‚Äôm asking you for one chance, a chance to walk this journey with me and turn our friendship into something forever.",
      "Dharmi Hapani, will you give this ‚Äòasshole‚Äô Smit Patel a chance to build a beautiful life with you? ‚ù§Ô∏è"
    ];

    // üîî Replace this with your own webhook or server endpoint
    const RESPONSE_ENDPOINT = "https://example.com/proposal-response";

    let index = 0;
    const textEl = document.getElementById('storyText');
    const btn = document.getElementById('nextBtn');
    const musicBtn = document.getElementById('musicBtn');
    const music = document.getElementById('bgMusic');
    const hearts = document.getElementById('hearts');

    function typeWriter(text, i = 0) {
      if (i < text.length) {
        textEl.innerHTML += text.charAt(i);
        setTimeout(() => typeWriter(text, i + 1), 28);
      }
    }

    function showText() {
      textEl.innerHTML = "";
      typeWriter(story[index]);
    }

    function sendResponse(choice) {
      fetch(RESPONSE_ENDPOINT, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          name: 'Dharmi Hapani',
          response: choice,
          timestamp: new Date().toISOString()
        })
      }).catch(() => {}); // silent fail to avoid breaking the moment
    }

    function showChoiceScreen() {
      const card = document.querySelector('.card');
      card.innerHTML = `
        <h1>Dharmi, what does your heart say? ‚ù§Ô∏è</h1>
        <button id="yesBtn">Yes, let‚Äôs try ‚ù§Ô∏è</button><br>
        <button id="timeBtn" class="music-btn">I need a little time üåø</button>
        <p id="responseMsg"></p>
      `;

      document.getElementById('yesBtn').onclick = () => {
        sendResponse('YES');
        document.getElementById('responseMsg').innerText =
          "You just made Smit the happiest idiot alive ‚ù§Ô∏è";
        heartBurst();
      };

      document.getElementById('timeBtn').onclick = () => {
        sendResponse('TIME');
        document.getElementById('responseMsg').innerText =
          "Take all the time you need. You are worth waiting for.";
      };
    }

    function finaleAnimation() {
      btn.style.display = 'none';

      const finale = document.createElement('div');
      finale.innerHTML = "Forever Starts With Us ‚ù§Ô∏è";
      finale.style.marginTop = '20px';
      finale.style.fontSize = '22px';
      finale.style.fontWeight = '600';
      finale.style.color = '#ff3d6e';
      finale.style.animation = 'pulse 1.2s ease-in-out infinite';

      document.querySelector('.card').appendChild(finale);

      heartBurst();

      setTimeout(showChoiceScreen, 2500);
    }

    btn.addEventListener('click', () => {
      if (index < story.length - 1) {
        index++;
        showText();
      } else {
        finaleAnimation();
      }
    });

    musicBtn.addEventListener('click', () => {
      if (music.paused) {
        music.play();
        musicBtn.innerText = "Pause Music ‚è∏";
      } else {
        music.pause();
        musicBtn.innerText = "Play Music üéµ";
      }
    });

    function createHeart(burst = false) {
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.innerHTML = '‚ù§';
      heart.style.left = Math.random() * 100 + '%';
      heart.style.fontSize = (Math.random() * 10 + 14) + 'px';
      heart.style.animationDuration = burst
        ? (Math.random() * 1 + 2) + 's'
        : (Math.random() * 2 + 4) + 's';
      hearts.appendChild(heart);

      setTimeout(() => heart.remove(), 5000);
    }

    function heartBurst() {
      for (let i = 0; i < 40; i++) {
        setTimeout(() => createHeart(true), i * 60);
      }
    }

    setInterval(() => createHeart(false), 350);

    const style = document.createElement('style');
    style.innerHTML = `
      @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.08); }
        100% { transform: scale(1); }
      }
    `;
    document.head.appendChild(style);

    showText();
  </script>

</body>
</html>
